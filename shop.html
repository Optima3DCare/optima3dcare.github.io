<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="shortcut icon" href="images/logo.png" type="image/x-icon">

</head>
<body>
    <a href="./checkout.html" id="random"></a>

    <section class="cart-container" id="dbc">
        <div class="cart">
            <div class="close__top">
                <button class="button" id="close">
                    <i class='bx bx-collapse-alt'></i>
                </button>
            </div>
            <h2>Your Cart</h2>

            <h3 style="text-align: center; color: white; margin-top: 10px" id="empty">Empty :(</h3>

            <div class="item" id="item">
                <div class="name">
                    <h1>InsuRakshak</h1>
                </div>
    
                <div class="pricequan">
                    <div class="price">
                        <p>Price: </p>
                        <b><p>₹1340</p></b>
                    </div>

                    <div class="quantity">
                        <p>| Quantity: </p>
                        <b><p id="quan">1</p></b>
                    </div>
                </div>
            </div>

            <h1 id="total">Total: ₹3000</h1>
            
            <div class="batman_forever">
                <button class="checkout button" id="checkout">Checkout</button>
            </div>
        </div>
        
    </section>
    
    <header class="header">
        <img src="images/logo.png" alt="Logo" class="logo">
        <i class='bx bx-menu' id="menu-icon"></i>
        <nav class="navbar">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="#">Shop</a>
            <a href="contact.html">Contact</a>
        </nav>
    </header>



    <section class="top" style="text-align: right; ">
        <button class="button" id="cart-btn" >
            <i class='bx bx-cart' style="font-size: 20px;"></i>
            Cart
        </button>

        
    </section>

    <section class="products">
        <h1 class="heading">Products</h1> <br />
        <div class="product-ir">
            <div class="left-pr">
                <img src="images/insurakshak.png" alt="Insurakshak Image" height="80%">
            </div>

            <div class="right-pr">
                <h1>InsuRakshak</h1>

                <p>A protective case which will keep life saving drugs like insulin in optimal temperature. Medicines and injections are sensitive to heat. High or too low temperature can alter the chemical composition of the drug which makes it unsuitable to consume. It's a compact, easy to carry case which will protect insulin even in extremely harsh heat.
                </p>

                <h1 style="margin: 10px;">₹1340 (20% off)</h1>

                <i class='bx bxs-star'></i>
                <i class='bx bxs-star'></i>
                <i class='bx bxs-star'></i>
                <i class='bx bxs-star'></i>
                <i class='bx bxs-star'></i>
                <br />
                <p>Choose colour: </p>
                <select name="colour" id="colour">
                    <option value="purple">Purple</option>
                    <option value="gray">Gray</option>
                    <option value="cyan">Cyan</option>
                    <option value="brown">Brown</option>
                    <option value="magenda">Magenda</option>
                    <option value="black">Black</option>
                </select>

                <br /> <br />

                <div>
                    <button class="button" id="atc">Add To Cart</button>
                
                    <div class="cart-count" id="cart-count">
                        <button class="button" id="down">-</button>
                        <p id="count">1</p>
                        <button class="button" id="up">+</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <h1 style="font-size: 20px; text-align: center; margin: 10px; color: white;">That's all!</h1>

    <footer>

        <div class="column1 column">
            <h1>O3C</h1>
            <p>&copy;OPTIMA 3D CARE 2023</p>
      </div>
      <div class="column2 column">
          <h2>Pages</h2>
          <div class="links">
            <a href="index.html">HOME</a><br>
            <a href="about.html">ABOUT</a><br>
            <a href="#">SHOP</a><br>
            <a href="contact.html">CONTACT</a><br><br>
          </div>
      </div>

      <div class="colum3 column">
        <h2>Important Links</h2>
        <div class="links">
          <a href="./privacy-policy.html">PRIVACY POLICY</a><br>
          <a href="./termsconditions.html">TERMS AND  <br>CONDITIONS</a><br>
          <a href="./p-policy.html">PAYMENT POLICY</a><br>
        </div>
    </div>

      <div class="column4 column">
          <h2>Support</h2>
          <div class="links">
            <a href="./contact.html">CONTACT</a><br>
            <a href="./contact.html">EMAIL</a><br>
          </div>
      </div>

      <div class="column5 column">
          <h2>Products & Apps</h2>
          <div class="links">
            <a href="./shop.html">INSURAKSHAK</a><br>
            <a href="./shop.html">INSURAKHAK APP</a><br>
          </div>
      </div>

  </footer>
  <script src="script.js"></script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.1/vanilla-tilt.min.js" integrity="sha512-wC/cunGGDjXSl9OHUH0RuqSyW4YNLlsPwhcLxwWW1CR4OeC2E1xpcdZz2DeQkEmums41laI+eGMw95IJ15SS3g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
        const atc = document.getElementById("atc");
        const cc = document.getElementById("cart-count");
        const countTxt = document.getElementById("count");
        const up = document.getElementById("up");
        const down = document.getElementById("down");
        const cartBtn = document.getElementById("cart-btn");
        const dbContainer = document.getElementById("dbc");
        const closeBtn = document.getElementById("close");
        const cartQuan = document.getElementById("quan");
        const empty = document.getElementById("empty");
        const item = document.getElementById("item");
        const total = document.getElementById("total");
        const checkout = document.getElementById("checkout");
        const random = document.getElementById("random");
        const colourElem = document.getElementById("colour");


        const displayCC = () => {
            cc.style.display = 'flex';
            atc.style.display = 'none';
        }

        const displayAtc = () => {
            atc.style.display = 'block';
            cc.style.display = 'none'
            atc.addEventListener("click", () => {
                count = 1;
                countTxt.textContent = count;
                localStorage.setItem("count", count)
                displayCC();
                fetchData(count);
            })
        }

        const reset = () => {
            if (count == 0){
                localStorage.removeItem("count");
                displayAtc();
            }
        }

        const decrease = () => {
            count = count > 0 ? count - 1 : 0; 
            localStorage.setItem("count",count);
            countTxt.textContent = count;
            reset();

        }
        const increase = () => {
            count = count < 5 ? count + 1 : 5; 
            localStorage.setItem("count", count);
            countTxt.textContent = count;
        }



        const fetchData = (data) => {
            if (data > 0){
                empty.style.display = 'none';
                total.style.display = 'block';
                checkout.style.display = 'block';
                item.style.display = 'block';
                cartQuan.textContent = data;
            } else {
                empty.style.display = 'block';
                total.style.display = 'none';
                checkout.style.display = 'none';
                item.style.display = 'none';
            }
            total.textContent = 'Total: ₹' + (1340 * count)
        }

        let count;
        let colour = "Purple";

        localStorage.setItem("colour", colour)

        if (localStorage.getItem("count") != null){
            count = parseInt(localStorage.getItem("count"));
            displayCC();
            countTxt.textContent = count;
            fetchData(count);
        } else {
            count = 0
            localStorage.setItem("count",count);
            displayAtc();
            atc.addEventListener("click", () => {
                count = 1;
                localStorage.setItem("count",count);
                displayCC();
            })
            fetchData(count);
        }

        cartBtn.addEventListener("click", () => {
            dbContainer.style.display = 'block';
            colour = colourElem.options[colourElem.selectedIndex].text;
            localStorage.setItem("colour",colour)
            fetchData(count);
        })

        closeBtn.addEventListener("click", () => {
            dbContainer.style.display = 'none';
        })

        up.addEventListener("click", () => {
            increase()
            fetchData(count);
        });

        down.addEventListener("click", () => {
            decrease()
            fetchData(count);
        });
        
        checkout.addEventListener("click", () => {
            random.click();
        })
  </script>
</body>
</html>